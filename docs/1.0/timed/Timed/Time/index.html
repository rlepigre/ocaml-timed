<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Time (timed.Timed.Time)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">timed</a> &#x00BB; <a href="../index.html">Timed</a> &#x00BB; Time</nav><header class="odoc-preamble"><h1>Module <code><span>Timed.Time</span></code></h1><p>The <code>Time</code> module provides an abstract representation of time, used to set a point from which updates to references are recorded to allow undoing (of redoing) the corresponding changes.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Point in the “timeline” of the program's execution.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-save" class="anchored"><a href="#val-save" class="anchor"></a><code><span><span class="keyword">val</span> save : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>save ()</code> registers the position of the program in its “timeline”. The returned value can then be used to “time-travel” toward this point, by calling <a href="#val-restore"><code>restore</code></a>. The saving operation runs in constant time. In the process one block of memory of three words is allocated. Note that two consecutive calls to <code>save</code> (i.e., with no interleaved <a href="../index.html#val-(:=)"><code>(:=)</code></a> or <a href="#val-restore"><code>restore</code></a>) return the same value, and the second one does not allocate any memory.</p></div></div><p>Note that when a saved “time” becomes unaccessible, memory previously allocated by <a href="../index.html#val-(:=)"><code>(:=)</code></a> may itself become unaccessible if none of the remaining saved “times” can undo the corresponding updates. If that is the case, the memory related to these update is collected. The memory footprint of the library is thus minimal.</p><div class="odoc-spec"><div class="spec value" id="val-restore" class="anchored"><a href="#val-restore" class="anchor"></a><code><span><span class="keyword">val</span> restore : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>restore t</code> has the effect of “traveling in time” towards a previously recorded point <code>t</code>. After calling this function, the reference updates made between <code>t</code> and the “time before the call” are undone. Note that this is the only basic operation that is not constant time. Complexity (time and space) is discussed below.</p></div></div><p>The time complexity of <a href="#val-restore"><code>restore</code></a> is O(MT) where:</p><ul><li>M is the maximum number of different references that were updated between two consecutive calls to <a href="#val-save"><code>save</code></a>.</li><li>T is the number of saved time between t and the current time. The number of memory blocks allocated by the <a href="#val-restore"><code>restore</code></a> function is proportional to the above T.</li></ul><p>A better expression of its time complexity is “Σ Mₖtₖ” (for 0 ≤ k &lt; n) where tₖ is the k-th (saved) time between t = t₀ and current time tₙ, and Mₖ is the number of different updated references between the times tₖ and tₖ₊₁.</p></div></body></html>